rules_version = '2';
service cloud.firestore {

  match /databases/{database}/documents {
    match /rooms/{roomId} {
      allow read: if true; // Anyone can read rooms

      match /messages/{messageId} {
        allow read: if true; // Anyone can read messages
      }
      
      match /messages/{document=**} {
         allow create: if request.resource.data.text != null && request.resource.data.imageBlob != null;
      }
    }
  }

}