import{w as n,d as c,r as m}from"./index.DLODF9zi.js";import{s as r,S as d,a as l,C as o}from"./constants.CRYFBpvt.js";const y=m(typeof document<"u"&&!document.hidden,e=>{if(typeof document<"u"){let t=function(){e(!document.hidden)};return document.addEventListener("visibilitychange",t,!1),()=>{document.removeEventListener("visibilitychange",t,!1)}}}),u=n(r.get(d)||!1);u.subscribe(e=>r.set(d,e));const f=n(void 0);let s=null;async function g(e){s&&s.getVideoTracks().forEach(t=>t.stop());try{const t=await navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:{ideal:e},aspectRatio:{ideal:1.3333333333333333},frameRate:{ideal:10},width:{ideal:640},height:{ideal:480}}});return s=t,t}catch(t){return console.error("Unable to activate webcam:",t),null}}const h=c([f,u],([e,t],a)=>{(async()=>{if(!t){a({status:"initial",stream:null});return}try{a({status:"requesting",stream:null});const i=await g(e);a({status:i?"active":"error",stream:i})}catch(i){console.error("Unable to activate webcam:",i),a({status:"error",stream:null})}})()},{status:"initial",stream:null});async function b(){try{return(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind==="videoinput")}catch(e){return console.error("Could not get the devices",e),[]}}const w=c(h,(e,t)=>{if(!(e!=null&&e.stream))return;async function a(){const i=await b();t(i)}return a(),navigator.mediaDevices.addEventListener("devicechange",a),()=>{navigator.mediaDevices.removeEventListener("devicechange",a)}},[]),v=n(r.get(l)||"Black & White");v.subscribe(e=>r.set(l,e));const D=c([v],([e],t)=>{const a=o[e]||o["Black & White"];t(a)});export{v as a,f as b,D as c,w as d,h as m,y as p,u as w};
