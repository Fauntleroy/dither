import{_ as I}from"./preload-helper.ii-2ED8s.js";const E=""+new URL("../assets/worker.Do-gSfo_.js",import.meta.url).href,r=150,m=200,h=10,v=2e3,w=1e3/h,f=v/1e3*h;function C(i){const e=document.createElement("canvas");e.width=m,e.height=r*f;const a=e.getContext("2d");return a?new Promise((s,n)=>{let t=0;function g(){if(!a){console.error("Error creating 2d canvas context while capturing frames");return}const d=t*r;a.drawImage(i,0,d,m,r),t++,t<f?setTimeout(g,w):e.toBlob(c=>{c?s(c):n("Could not convert canvas to blob")},"image/png")}setTimeout(g,w)}):(console.error("Error creating 2d canvas context while generating GIF"),Promise.reject("Error creating 2d canvas context while generating GIF"))}async function M(i,e){const{encode:a}=await I(async()=>{const{encode:o}=await import("./index.DbG5pIsb.js");return{encode:o}},[],import.meta.url),s=document.createElement("canvas");s.width=m,s.height=r;const n=s.getContext("2d");if(!n){console.error("Error creating 2d canvas context while generating GIF");return}const t=[];for(let o=0;o<f;o++){n.drawImage(i,0,o*r,m,r,0,0,m,r);const p=n.getImageData(0,0,m,r);t.push({data:p.data,delay:100})}const g=await a({workerUrl:E,width:m,height:r,frames:t}),d=new Blob([g],{type:"image/gif"}),c=window.URL.createObjectURL(d),l=document.createElement("a");l.href=c,l.download=`${e}.gif`;const u=new MouseEvent("click");l.dispatchEvent(u),setTimeout(()=>window.URL.revokeObjectURL(c),100)}function b(i,e){const a=i.getContext("2d");if(!a)throw new Error("Canvas context not available");const s=a.getImageData(0,0,i.width,i.height),n=s.data;for(let t=0;t<n.length;t+=4){const g=n[t],d=n[t+1],c=n[t+2],l=Math.sqrt(Math.pow(g-parseInt(e[0].slice(1,3),16),2)+Math.pow(d-parseInt(e[0].slice(3,5),16),2)+Math.pow(c-parseInt(e[0].slice(5,7),16),2)),u=Math.sqrt(Math.pow(g-parseInt(e[1].slice(1,3),16),2)+Math.pow(d-parseInt(e[1].slice(3,5),16),2)+Math.pow(c-parseInt(e[1].slice(5,7),16),2)),o=l<u?e[0]:e[1];n[t]=parseInt(o.slice(1,3),16),n[t+1]=parseInt(o.slice(3,5),16),n[t+2]=parseInt(o.slice(5,7),16)}a.putImageData(s,0,0)}export{C as a,b as c,M as g};
