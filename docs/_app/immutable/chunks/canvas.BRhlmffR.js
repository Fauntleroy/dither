import{_ as v}from"./preload-helper.BHK0ePA4.js";const I=""+new URL("../assets/worker.Do-gSfo_.js",import.meta.url).href,l=150,u=200,b=10,_=2e3,p=1e3/b,w=_/1e3*b;function T(t){const r=document.createElement("canvas");r.width=u,r.height=l*w;const c=r.getContext("2d");if(!c){console.error("Error creating 2d canvas context while generating GIF");return}return new Promise(s=>{let e=0;function o(){if(!c){console.error("Error creating 2d canvas context while capturing frames");return}const i=e*l;if(c.drawImage(t,0,i,u,l),e++,e<w)setTimeout(o,p);else{const a=r.toDataURL("image/png");s(a)}}setTimeout(o,p)})}async function L(t,r){const{encode:c}=await v(async()=>{const{encode:d}=await import("./index.DbG5pIsb.js");return{encode:d}},[],import.meta.url),s=document.createElement("canvas");s.width=u,s.height=l;const e=s.getContext("2d");if(!e){console.error("Error creating 2d canvas context while generating GIF");return}const o=[];for(let d=0;d<w;d++){e.drawImage(t,0,d*l,u,l,0,0,u,l);const R=e.getImageData(0,0,u,l);o.push({data:R.data,delay:100})}const i=await c({workerUrl:I,width:u,height:l,frames:o}),a=new Blob([i],{type:"image/gif"}),f=window.URL.createObjectURL(a),n=document.createElement("a");n.href=f,n.download=`${r}.gif`;const m=new MouseEvent("click");n.dispatchEvent(m),setTimeout(()=>window.URL.revokeObjectURL(f),100)}const g="a-f\\d",$=`#?[${g}]{3}[${g}]?`,h=`#?[${g}]{6}([${g}]{2})?`,y=new RegExp(`[^#${g}]`,"gi"),C=new RegExp(`^${$}$|^${h}$`,"i");function E(t,r={}){if(typeof t!="string"||y.test(t)||!C.test(t))throw new TypeError("Expected a valid hex string");t=t.replace(/^#/,"");let c=1;t.length===8&&(c=Number.parseInt(t.slice(6,8),16)/255,t=t.slice(0,6)),t.length===4&&(c=Number.parseInt(t.slice(3,4).repeat(2),16)/255,t=t.slice(0,3)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const s=Number.parseInt(t,16),e=s>>16,o=s>>8&255,i=s&255,a=typeof r.alpha=="number"?r.alpha:c;if(r.format==="array")return[e,o,i,a];if(r.format==="css"){const f=a===1?"":` / ${Number((a*100).toFixed(2))}%`;return`rgb(${e} ${o} ${i}${f})`}return{red:e,green:o,blue:i,alpha:a}}function A(t,r){const[c,s]=r,e=E(c,{format:"array"}),o=E(s,{format:"array"});let i,a,f;for(let n=0,m=t.data.length;n<m;n+=4)i=t.data[n],a=t.data[n+1],f=t.data[n+2],i===0&&a===0&&f===0?(t.data[n]=e[0],t.data[n+1]=e[1],t.data[n+2]=e[2]):i===255&&a===255&&f===255&&(t.data[n]=o[0],t.data[n+1]=o[1],t.data[n+2]=o[2]);return t}export{L as a,A as c,T as g};
